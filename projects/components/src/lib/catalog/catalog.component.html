<div class="h-box" *ngIf="config">
  <div class="controls h-item f-h content pad-8">
    <form #form="ngForm" [formGroup]="formGroup">
      <div class="v-box">
        <button color="accent" class="save-button" [disabled]="!canSave" mat-raised-button (click)="saveConfig()">Enregister la configuration</button>
        <button color="accent" class="save-button" [disabled]="!canSave" mat-raised-button (click)="download()">Télécharger le catalogue</button>
      </div>

      <div class="form-item-group border content border br-4 pad-8">
        <label>Page</label>
        <div class="form-item">
          <label>Format:</label>
          <mat-radio-group class="form-item" formControlName="format">
            <mat-radio-button class="example-margin" value="a4">A4</mat-radio-button>
            <mat-radio-button class="example-margin" value="a3">A3</mat-radio-button>
          </mat-radio-group>
          <mat-error *ngIf="formGroup.controls.format.invalid">
            {{getErrorMessage(formGroup.controls.format)}}
          </mat-error>
        </div>
        <div class="form-item">
          <label>Orientation:</label>
          <mat-radio-group class="form-item" formControlName="orientation">
            <mat-radio-button value="p">portrait</mat-radio-button>
            <mat-radio-button value="l">paysage</mat-radio-button>
          </mat-radio-group>
          <mat-error *ngIf="formGroup.controls.orientation.invalid">
            {{getErrorMessage(formGroup.controls.orientation)}}
          </mat-error>
        </div>
        <div class="form-item">
          <label>Marges:</label>
          <div class="form-item" formGroupName="margin">
            <mat-form-field>
              <input placeholder="Haut" matInput type="number" formControlName="top">
              <mat-error *ngIf="formGroup.controls.margin.controls.top.invalid">
                {{getErrorMessage(formGroup.controls.margin.controls.top)}}
              </mat-error>
            </mat-form-field>
            <mat-form-field>
              <input placeholder="Bas" matInput type="number" formControlName="bottom">
              <mat-error *ngIf="formGroup.controls.margin.controls.bottom.invalid">
                {{getErrorMessage(formGroup.controls.margin.controls.bottom)}}
              </mat-error>
            </mat-form-field>
            <mat-form-field>
              <input placeholder="Gauche" matInput type="number" formControlName="left">
              <mat-error *ngIf="formGroup.controls.margin.controls.left.invalid">
                {{getErrorMessage(formGroup.controls.margin.controls.left)}}
              </mat-error>
            </mat-form-field>
            <mat-form-field>
              <input placeholder="Droite" matInput type="number" formControlName="right">
              <mat-error *ngIf="formGroup.controls.margin.controls.right.invalid">
                {{getErrorMessage(formGroup.controls.margin.controls.right)}}
              </mat-error>
            </mat-form-field>
          </div>
        </div>
      </div>
      <div class="form-item-group border content border br-4 pad-8" formGroupName="style">
        <label>Motif</label>
        <div class="form-item">
          <mat-form-field>
            <input placeholder="Couleur fond" matInput formControlName="fill">
          </mat-form-field>
          <mat-error *ngIf="formGroup.controls.style.controls.fill.invalid">
            {{getErrorMessage(formGroup.controls.style.controls.fill)}}
          </mat-error>
        </div>
        <div class="form-item">
          <mat-form-field>
            <input placeholder="Couleur contour" matInput formControlName="stroke">
          </mat-form-field>
          <mat-error *ngIf="formGroup.controls.style.controls.stroke.invalid">
            {{getErrorMessage(formGroup.controls.style.controls.stroke)}}
          </mat-error>
        </div>
        <div class="form-item">
          <mat-form-field>
            <input placeholder="Épaisseur contour" matInput type="number" formControlName="strokeWidth">
            <mat-error *ngIf="formGroup.controls.style.controls.strokeWidth.invalid">
              {{getErrorMessage(formGroup.controls.style.controls.strokeWidth)}}
            </mat-error>
          </mat-form-field>
        </div>
      </div>
      <div class="form-item-group border content border br-4 pad-8">
        <label>Rangées</label>
        <div class="form-item">
          <mat-form-field>
            <input placeholder="Nombre" matInput type="number" formControlName="numRows">
            <mat-error *ngIf="formGroup.controls.numRows.invalid">
              {{getErrorMessage(formGroup.controls.numRows)}}
            </mat-error>
          </mat-form-field>
        </div>
        <div class="form-item">
          <mat-form-field>
            <input placeholder="Éspacement" matInput type="number" formControlName="rowGap">
            <mat-error *ngIf="formGroup.controls.rowGap.invalid">
              {{getErrorMessage(formGroup.controls.rowGap)}}
            </mat-error>
          </mat-form-field>
        </div>
        <div class="form-item">
          <mat-form-field>
            <input placeholder="Éspacement Motif" matInput type="number" formControlName="itemGap">
            <mat-error *ngIf="formGroup.controls.itemGap.invalid">
              {{getErrorMessage(formGroup.controls.itemGap)}}
            </mat-error>
          </mat-form-field>
        </div>
      </div>
      <div class="form-item-group border content border br-4 pad-8">
        <label>Texte</label>
        <div class="form-item">
          <mat-form-field>
            <input placeholder="Marge" matInput type="number" formControlName="textPadding">
          </mat-form-field>
          <mat-error *ngIf="formGroup.controls.textPadding.invalid">
            {{getErrorMessage(formGroup.controls.textPadding)}}
          </mat-error>
        </div>
        <div class="form-item">
          <mat-form-field>
            <input placeholder="Taille" matInput type="number" formControlName="fontSize">
            <mat-error *ngIf="formGroup.controls.fontSize.invalid">
              {{getErrorMessage(formGroup.controls.fontSize)}}
            </mat-error>
          </mat-form-field>
        </div>
        <div class="form-item">
          <mat-form-field>
            <input placeholder="Couleur" matInput formControlName="textColor">
            <mat-error *ngIf="formGroup.controls.textColor.invalid">
              {{getErrorMessage(formGroup.controls.textColor)}}
            </mat-error>
          </mat-form-field>
        </div>
      </div>
    </form>
  </div>
  <div class="h-item f-w" mat-elevation-z4>
    <div class="pdf-preview">
      <pdf-viewer *ngIf="pdfUrl != undefined" (after-load-complete)="pdfLoaded($event)" [src]="pdfUrl" [fit-to-page]="true"
        [original-size]="false" [render-text]="true" style="display: block;"></pdf-viewer>
    </div>
  </div>
</div>